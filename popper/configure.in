AC_INIT(popper.c)
WITH_CCOPTS
AC_FUNC_CHECK(vsprintf,AC_DEFINE(HAS_VSPRINTF))
CONFIG_RULES
AC_SET_BUILDTOP
AC_HAVE_LIBRARY(socket)
AC_HAVE_LIBRARY(nsl)
AC_HAVE_LIBRARY(BSD)
AC_HAVE_LIBRARY(ndbm)

AC_HEADER_CHECK(flock.h,[echo found flock.h for non-posix locks],
AC_COMPILE_CHECK([POSIX file locking -- structs and flags],
[#include <sys/types.h>
#include <fcntl.h>],
[struct flock f; 1+F_SETLK;], 
AC_DEFINE(POSIX_FILE_LOCKS)))

AC_HEADER_CHECK(unistd.h,AC_DEFINE(HAS_UNISTD_H))
AC_HEADER_CHECK(paths.h,AC_DEFINE(HAS_PATHS_H))

KRB_INCLUDE
WITH_KRB5ROOT
AC_OUTPUT(Makefile,[EXTRA_RULES])
